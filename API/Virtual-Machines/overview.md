# VM


## Introduction
VM instance, image, instance type, instance template, quota-related APIs


### Version
v1


## API
|Interface name|Request mehod|Function description|
|---|---|---|
|**associateElasticIp**|POST|Associate Elastic IP for the primary intranet IP of primary network interface under virtual machine.<br></br>A virtual machine can only be associated with one Elastic IP for primary network interface, and error will occur if the primary network interface is already associated with Elastic IP.<br></br>|
|**attachDisk**|POST|Attach a data disk (cloud disk) for a virtual machine, and the attachment is only available when there is no task in progress for virtual machine and cloud disk. <br></br>The virtual machine status must be <b>running</b> or <b>stopped</b>. <br></br>The virtual machine with local disk as system disk can be attached with 8 data disks, and 7 data disks for the virtual machine with cloud disk as system disk.</br>|
|**attachNetworkInterface**|POST|Attach an elastic network interface for a virtual machine <br></br>The virtual machine status must be <b>running</b> or <b>stopped</b>, and the attachment is only available when there is no task in progress. <br></br>If the public IP is associated with the elastic network interface, the az of the public IP needs to be consistent with the az of the Virtual Machines, or the public network IP belongs to the full available zone to be attached. <br></br>The number of the Virtual Machines to attach the elastic network interface cannot exceed the limit of the instance type. Can query <a href="http://docs.jdcloud.com/virtual\-machines/api/describeinstancetypes"> DescribeInstanceTypes</a> interface gives specification information for the specified zone or availability zone. <br></br>The elastic network interface and the Virtual Machines must be under the same vpc.</br>|
|**copyImages**|POST|Image inter-domain replication, copy private images to other regions, allowing  you to operate your private image only. <br></br>Only the image operations of cloud system disk with rootDeviceType as cloudDisk are supported.</br>|
|**createImage**|POST|Create a private image for the virtual machine. The virtual machine status must be <b>stopped</b>. <br></br>The creation of an image is only available when there is no task in progress for virtual machine. <br></br>Image is created based on system disk backup. The whole-machine image can be created by fully or partially attaching data disk (If no changes are made, then the whole-machine image is created by default). During the process of creating an image, the snapshot of the attached cloud disk will be created and it will be associated with the image. <br></br>After calling the API, the user can not use the image normally until the image status becomes <b>ready</b>.</br>|
|**createInstances**|POST|Create VM with one or more specified configurations, which is divided into three types: 1. general mode, 2. availability group, 3. use of the starting template. The required and non-required transfer of parameters when creating VM in three ways is different. <a href="http://docs.jdcloud.com/virtual\-machines/api/create_vm_sample">Please refer to details</a><br></br>\- Creating a VM requires real\-name verification</br>\- Instance Type</br>    \- Can query <a href="http://docs.jdcloud.com/virtual\-machines/api/describeinstancetypes">DescribeInstanceTypes</a> Interface gets specification information for a specified domain or availability zone</br>    \- It is not possible to use for off\-line, or a specification ID of the carnation already sold</br>\- image</br>    \- Windows Server 2012 R2 Standard Edition 64\-bit Chinese version SQL Server 2014 Standard SP2 memory needs more than 1 GB;</br>    \- Windows Server all image CPUs must not be selected to exceed 64 cores CPU.</br>    \- Can query <a href="http://docs.jdcloud.com/virtual\-machines/api/describeimages">DescribeImages</a> Interface derives image information for the specified zone.</br>    \- The selected image must support the selected instance type. Can query href="http://docs.jdcloud.com/virtual\-machines/api/describeimageconstraints">DescribeImageConstraints</a> Interface obtains instance type limit information for the specified image.<br></br>\- Network Instance Type</br>    \- Specify primary network interface configuration information</br>        \- SubnetId must be specified</br>        \- You can specify the elastrological specification to constrain the created EIP, the bandwidth value range[1\-100] Mbps, step 1 Mbps</br>        \- The primary intranet IP (primaryIpAddress) of primary network interface can be specified, when maxCount can only be 1</br>        \- The security group securityGroup needs to be within the same VPC as the subnet Subnet</br>        \- A security group must be specified when a virtual machine is created, and  at most 5 security groups are specified. If no security group is specified, the default security group is used by default</br>        \- The primary network interface deveIndex is set to 1</br>\- Storage</br>    \- System Disk</br>        \- Disk classification, system disk support, or cloud</br>        \- Disk Size</br>            \- ERROR: Unable to specify size, default 40GB</br>            \- cloud: Value range: 40\-500GB, and cannot be smaller than the minimum system disk size of image; if not specified, the default is the system disk size in the image</br>        \- Auto\-delete</br>            \- If local, default auto\-deletion, this property cannot be modified</br>            \- True if cloud disk paid by configuration</br>    \- Data Disk</br>        \- Disk classification, data disks only support cloud</br>        \- The type of cloud disk can be ssd or premium\-hdd</br>        \- Disk Size</br>            \- premium\-hdd: Range[20, 3000] GB, Step Size: 10G</br>            \- ssd: Range[20, 1000] GB, Step Size: 10G</br>        \- Auto\-delete</br>            \- Auto\-deletion by default, for the data disk or shared data disk of the monthly package, this parameter does not take effect</br>            \- SnapshotId can be specified to create a cloud disk</br>        \- You can create a disk from a snapshot</br>    \- The virtual machine with local disk as system disk can be attached with 8 data disks</br>    \- The virtual machine with cloud disk as system disk can be attached with 7 data disks</br>\- Billing</br>    \- Billing mode of EIP. You may choose pay by consumption separately, and the other billing modes are subject to the machine.</br>    \- The billing mode of the cloud disk is subject to the machine</br>\- Others</br>    \- After the creation is complete, the machine status is running</br>    \- Only the Linux system virtual machines can specify key pair</br>    \- maxCount is the maximum effort, and it is not guaranteed that maxCount can be reached</br>    \- The VM's az replaces the az attribute of the disk</br>\- Password</br>    \- <a href="https://www.jdcloud.com/help/detail/3870/isCatalog/1">Refer to the public parameter specification</a></br>|
|**createKeypair**|POST|Create key pairs. The public key part is stored in JD Cloud, and the private key in PKCS#8 format of the unencrypted PEM code will be returned. You only have on opportunity to save your private key. Please appropriately keep your private key. <br></br>If the existed key pair name is uploaded, errors will be returned. </br>|
|**deleteImage**|DELETE|Delete a private image that only allows you to operate your personal private image.</br>If the image is shared to other users, the image can be deleted only when the sharing is released.</br>|
|**deleteInstance**|DELETE|Delete a single VM that is paid by configuration, or expires in monthly package. You cannot delete a VM without billing information. <br></br>The virtual machine status must be </b>running</b>, </b>stopped<b>, or <b>error<b>, and the deletion is only available when there is no task in progress for virtual machine. <br></br>The virtual machine that has not expired in monthly package cannot be deleted. The white list user cannot delete the virtual machine that has expired in monthly package. <br></br>If the data disk attached in the machine is the cloud disk billed by instance type and is not a shared cloud disk, and the AutoDelete property is true, then the data disk is deleted along with the machine.</br></br>Sensitive operation, enable<a href="https://docs.jdcloud.com/IAM/Operation\-Protection">MFA operation protection</a>|
|**deleteKeypair**|DELETE|Delete key pairs. </br>|
|**describeImage**|GET|Query image details.</br>|
|**describeImageConstraints**|GET|Query the instance type limit of the image. <br></br>This API allows you to view the instance types that are not supported by the image. Only the public image and the third-party image have restrictions for instance types, and the private image of the individual does not have this limit.</br>|
|**describeImageConstraintsBatch**|GET|Batch query image instance type constraints. <br></br>This API allows you to view the instance types that are not supported by the image. Only the public image and the third-party image have restrictions for instance types, and the private image of the individual does not have this limit.</br>|
|**describeImageMembers**|GET|Query the image-shared account list, allowing  you to operate your personal private image only.</br>|
|**describeImages**|GET|Query the image information list. <br></br>This API allows you to query an public image of JD Cloud, a third-party image, a private image, or an image that other users share to you. <br></br>This API supports paging query with 20 items per page by default.</br>|
|**describeInstance**|GET|Query details for a VM</br>|
|**describeInstancePrivateIpAddress**|GET|Query the private IP address of the VM in batches is to query the primary intranet IP of primary network interface.|
|**describeInstanceStatus**|GET|Batch Query of VM Status|
|**describeInstanceTypes**|GET|Query instance type information list</br>|
|**describeInstanceVncUrl**|GET|Get the virtual machine vnc for connection management of virtual machine. <br></br>The vnc address is valid for 1 hour. If the vnc address is not used within 1 hour after being obtained, it will become invalid automatically and need to be re-acquired.</br>|
|**describeInstances**|GET|Batch Query of Virtual Machines Details<br></br>This API supports paging query with 20 items per page by default.</br>|
|**describeKeypairs**|GET|Query secret key pairs in batches. <br></br>This API supports query in pages, with 20 entries per page by default. </br>|
|**describeQuotas**|GET|Query quota, support: VM, image, key pair, template</br>|
|**detachDisk**|POST|Detach a data disk for a virtual machine, and the detachment is only available when there is no task in progress for virtual machine and cloud disk. <br></br>|
|**detachNetworkInterface**|POST|Detach an elastic network interface for a virtual machine. <br></br>The virtual machine status must be <b>running</b> or <b>stopped</b>, and the detachment is only available when there is no task in progress. <br></br>The primary network interface cannot be detached.</br>|
|**disassociateElasticIp**|POST|Disassociate VM from Elastic IP is to disassociate the Elastic IP for the primary intranet IP of primary network interface.</br>|
|**importKeypair**|POST|Import public key parts of key pairs produced by other tools. <br></br>If the existed key pair name is uploaded, errors will be returned. </br>|
|**modifyImageAttribute**|POST|Modify the image information, including name and description; Only allow your personal private image to be operated.</br>|
|**modifyInstanceAttribute**|POST|Modify certain VM information, including name and description.</br>|
|**modifyInstanceDiskAttribute**|POST|Modify the attributes of a data disk attached with a VM, including whether to delete with the machine.</br>|
|**modifyInstanceNetworkAttribute**|POST|Modify the VM's elastic network interface properties, including whether to delete with the virtual machine. <br></br>The primary network interface cannot be modified.</br>|
|**modifyInstancePassword**|POST|Modify the VM password, and the modification is only available when there is no task in progress for the machine. <br></br>The new password will take effect after the VM is rebooted.</br>|
|**rebootInstance**|POST|Reboot a single VM, only the virtual machine in the status of <b>running</b> can be rebooted, and the reboot is only available when there is no task in progress for virtual machine.</br>|
|**rebuildInstance**|POST|Virtual machine uses the specified image to reset the VM system<br></br>The status of the Virtual Machines must be <b>stopped</b>. <br></br>If the system disk of the current virtual machine is of local type, the replacement image must be the localDisk type; similarly, if the system disk of the current virtual machine is of cloud type, the replacement image must be the cloudDisk type. Can query <a href="http://docs.jdcloud.com/virtual\-machines/api/describeimages"> DescribeImages</a> Interface gets the image information for the specified zone. <br></br>If you do not specify the image ID, the current machine's original image rebuild system is used by default. <br></br>The specified image must be able to support the instanceType of the current machine, otherwise an error will occur. Can query <a href="http://docs.jdcloud.com/virtual\-machines/api/describeimageconstraints">DescribeImageConstraints</a> API for instance type limit information about the specified image.</br>|
|**resizeInstance**|POST|Change Instance Types for Virtual Machines</br>The status of the virtual machines must be stopped. <br></br>For the machines created in 2016 with cloud disk as system disk, and the instance types of the first generation and the second generation are not allowed to be adjusted to each other. <br></br>For the machines with local disk as system disk, the instance types of the first generation and the second generation are not allowed to be adjusted to each other. <br></br>For the machines created using availability group (Ag), the instance types of the first generation and the second generation are not allowed to be adjusted to each other. <br></br>For the machines with cloud disk as system disk, the instance types of the first generation and the second generation are not allowed to be adjusted to each other. <br></br>If the number of elastic network interfaces in the current machine is greater than the number of elastic network interfaces allowed by the instance type, an error is returned. Can query <a href="http://docs.jdcloud.com/virtual\-machines/api/describeinstancetypes"> DescribeInstanceTypes</a> Interface obtains instance type information for the specified zone or availability zone. <br></br>The image used by the current machine needs to support the target instance type to be changed, otherwise an error will occur. Can query <a href="http://docs.jdcloud.com/virtual\-machines/api/describeimageconstraints">DescribeImageConstraints</a> Interface obtains instance type limit information for the specified image <br></br>The instance type cannot be changed when the user is in arrears with the VM fees.</br>|
|**shareImage**|POST|Shared Image allows you to operate only your private image, and a single image can be shared for up to 20 JD Cloud accounts. <br></br>The whole-machine image does not currently support sharing.</br>|
|**startInstance**|POST|Start a single VM, only the virtual machine in the status of <b>stopped</b> can be started, and the start is only available when there is no task in progress for virtual machine. <br></br>Only the virtual machine with normal billing status can be started.</br>|
|**stopInstance**|POST|Stop a single VM, only the virtual machine in the status of <b>running</b> can be stopped, and the stop is only available when there is no task in progress for virtual machine.</br>|
|**unShareImage**|POST|Unshared images only allow you to operate your personal private image.</br>|
