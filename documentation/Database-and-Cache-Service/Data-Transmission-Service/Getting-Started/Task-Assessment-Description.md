# 预检查说明

迁移任务启动后将先执行预检查，检查源库、目标库是否可连通及版本、设置等是否满足迁移要求，预检查通过后，才可执行数据库迁移。

以下为不同数据库类型的检查项，请在创建任务前提前检查相关项。



## MySQL

| 检查项             | 说明                                                         |
| ------------------ | ------------------------------------------------------------ |
| 源端连通性         | 检查源端是否可连通                                           |
| 源端权限           | 检查源端账号权限是否满足要求                                 |
| 源端ServerID       | 检查源端ServerID是否大于1                                    |
| 源端BinlogOn       | 检查源端是否开启Binlog                                       |
| 源端BinlogMode     | 检查源端binlog_format是ROW                                   |
| 源端BinlogRowImage | 检查源端binlog_row_image是FULL                               |
| 源端Schema         | 检查源端是否存在数据校验库`_jdts_check__xxxx`                |
| 源端Table          | 检查源端是否存设置的待迁移Table                              |
| 源端Table主键      | 检查源端Table是否有主键                                      |
| 源端Table外键      | 检查源端是否有外键                                           |
| 目标端连通性       | 检查目标端是否可连通                                         |
| 目标端Schema       | 检查目标端是否有与源端同名的库，及是否存在数据校验库`_jdts_check__xxxx` |
| 数据库版本         | 检查源端与目标端数据库版本是否符合要求                       |



## SQL Server

| 检查项                 | 说明                                   |
| ---------------------- | -------------------------------------- |
| 源端连通性             | 检查源端是否可连通                     |
| 源端权限               | 检查源端账号权限是否符合要求           |
| 源端数据库Recovery模式 | 检查源端Recovery模式是否为FULL         |
| 源端DB                 | 检查是否存在待迁移的库                 |
| 源端Table              | 检查源端是否存设置的待迁移Table        |
| 源端Table主键          | 检查源端Table是否有主键                |
| 目标端连通性           | 检查目标端是否可连通                   |
| 目标端DB               | 检查目标端是否有与源端同名的库         |
| 数据库版本             | 检查源端与目标端数据库版本是否符合要求 |



## MongoDB

| 检查项       | 说明                               |
| ------------ | ---------------------------------- |
| 源端连通性   | 检查源端是否可连通                 |
| 源端版本     | 检查源端数据库版本是否符合要求     |
| 源端权限     | 检查源端账号权限是否符合要求       |
| 源端Oplog    | 检查源端是否为副本集模式           |
| 目标端连通性 | 检查目标端是否可连通               |
| 目标端权限   | 检查目标端权限是否符合要求         |
| 目标端版本   | 检查目标端数据库版本是否符合要求   |
| 目标端集合   | 检查目标端是否存在与源端重名的集合 |
